functions {
	sqrt  = sqrt(4)
	upper = upper($str1)
	lower = lower($upper)
	max   = max(1, 9, 4, 7)
	min   = min(1, 1, 0, -1)
	replace = $lower != $upper ? replace("foobar", "oo", "OO", count=0) : ""
}

user_defined {
	sayHello(msg="") {
		return msg ? msg : "hello world"
	}

	addInt(x, y) {
		return x + y
	}

	cond(bool) {
		if (bool) {
			return bool
		} else {
			return bool
		}
	}

	loop(until) {
		let i = 0
		while (i < until) {
			i += 1
		}
		return i
	}

	check_file(file) {
		return isfile(file)
	}

	loop2() {
		let i = 0
		while (i < 100) {
			if (i > 0 && i % 3 == 2) {
				i += 1
				continue
			}
			if (i >= 50) {
				break
			}
			i += 2
		}
		i + 1 # same as return i + 1
	}

	loop3(arr) {
		let i = 0
		foreach(x, item in arr) {
			i += item
		}
		return i
	}

	loop4() {
		let i = 0
		for (let j = 0; j < 100; j += 1) {
			i += 1
		}
		return i
	}

	loop5() {
		let i = 0
		for (; j < 100;) {
			i += j
			j += 1
		}
		return i
	}

	loop6() {
		let i = 0
		for (; ;) {
			break
		} else {
			return 100
		}
		return i
	}

	hello = sayHello()
	world = sayHello(msg="say world")
	add   = addInt(10, 20)
	bool1 = cond(yes)
	bool2 = cond(no)
	until = loop(10)
	ctrl  = loop2()
	each  = loop3([1, 2, 3])
	for4  = loop4()
	for6  = loop6()
	exists = check_file("testdata/main.fig")
}
